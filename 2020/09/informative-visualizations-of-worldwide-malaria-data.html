<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


  <title>Informative Visualizations of Worldwide Malaria Data</title>


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
<link href="/2020/09/informative-visualizations-of-worldwide-malaria-data.html" rel="canonical" />
  <!-- Feed -->

  <link href="/theme/css/style.css" type="text/css" rel="stylesheet" />

  <!-- Code highlight color scheme -->
      <link href="/theme/css/code_blocks/github.css" rel="stylesheet">

    <!-- CSS specified by the user -->


    <link href="/assets/css/myblog.css" type="text/css" rel="stylesheet" />

  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->



    <meta name="description" content="This blog includes 3 functions that could be used for 3 problems from the Euler Project and the mathematical approach to solve these problems.">

    <meta name="author" content="Zhenhui Xu">





<!-- Open Graph -->
<meta property="og:site_name" content="Zhenhui Blog"/>
<meta property="og:title" content="Informative Visualizations of Worldwide Malaria Data"/>
<meta property="og:description" content="This blog includes 3 functions that could be used for 3 problems from the Euler Project and the mathematical approach to solve these problems."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="/2020/09/informative-visualizations-of-worldwide-malaria-data.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2020-09-12 14:29:00+05:30"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="/author/zhenhui-xu">
<meta property="article:section" content="Visualizations"/>
<meta property="og:image" content="/assets/images/duke2.jpg">

<!-- Twitter Card -->

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Informative Visualizations of Worldwide Malaria Data",
  "headline": "Informative Visualizations of Worldwide Malaria Data",
  "datePublished": "2020-09-12 14:29:00+05:30",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "Zhenhui Xu",
    "url": "/author/zhenhui-xu"
  },
  "image": "/assets/images/duke2.jpg",
  "url": "/2020/09/informative-visualizations-of-worldwide-malaria-data.html",
  "description": "This blog includes 3 functions that could be used for 3 problems from the Euler Project and the mathematical approach to solve these problems."
}
</script>
</head>
<!-- TODO : Body class -->
<body class="home-template">

<nav id="menu">
  <a class="close-button">Close</a>
  <div class="nav-wrapper">
    <p class="nav-label">Menu</p>
    <ul>

              <li role="presentation"><a href="/pages/guide-to-set-up-github-pages-by-pelican/">Guide to set up Github Pages by Pelican</a></li>
              <li role="presentation"><a href="/pages/solutions-to-3-problems-from-the-euler-project/">Solutions to 3 problems from the Euler Project</a></li>

    </ul>
  </div>
</nav>
    <!-- Progressbar -->
    <div class="progress-container">
        <span class="progress-bar"></span>
    </div>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header id="post-header" class="has-cover">
      <div class="inner">
        <nav id="navigation">
            <span id="home-button" class="nav-button">
                <a class="home-button" href="/" title="Home"><i class="ic ic-arrow-left"></i> Home</a>
            </span>
          <span id="menu-button" class="nav-button">
            <a class="menu-button"><i class="ic ic-menu"></i> Menu</a>
          </span>
        </nav>
        <h1 class="post-title">Informative Visualizations of Worldwide Malaria Data</h1>
        <!-- TODO : Proper class for headline -->
        <span class="post-meta">
                <a href="/author/zhenhui-xu">Zhenhui Xu</a>
            | <time datetime="12 9月 2020">12 9月 2020</time>
        </span>
        <!-- TODO : Modified check -->
            <div class="post-cover cover" style="background-image: url('/assets/images/duke2.jpg')">
      </div>
    </header>

  <section id="wrapper">
    <a class="hidden-close"></a>

    <!-- Post content -->
    <main class="content" role="main">
        <article class="post">
        <div class="inner">
            <section class="post-content">
                <h2>Data Source</h2>
<p><a href="https://github.com/rfordatascience/tidytuesday/tree/master/data/2018/2018-11-13">Malaria dataset</a> contains 3 tables which include death rate and incidence rate from malaria worldwide from 1990 to 2016.  </p>
<h2>Visualizations</h2>
<p>Here are 3 informative visulizations based on the malaria dataset. The first visual shows the death rate by country each year. The second visual shows the trend of worldwide death rate from malaria over time and use a rolling window to show the overall trend. The third visual shows the proportion of different age groups of malaria deaths.</p>
<h3>Mapping Annual Death Rate to World Map over time</h3>
<p>The colorbar shows the death rate per 100,000 people. The slidebar enables the users to select the time interactively. This is the age-standardized death rate in 1992. The death rate is highest in Africa. Some countries in west Asia also have a high death rate.</p>
<p><img alt="" src="assets\images\fig1.png"></p>
<p>We can also observe the death rate in 2008 if we toggle the slidebar. The overall distribution of malaria death rate doesn't change much in these years while the death rate in some countries in Africa (e.g. near the east coast) decreases.</p>
<p><img alt="" src="assets\images\fig4.png"></p>
<h3>Annual Deaths by Age Group over Time</h3>
<p>This figure shows the annual deaths from malaria by age group from 1990 to 2016. The kids under 5 comprises over 80% of all the death cases while the deaths of other age groups are much less. The deaths from malaria reaches the peak in 2003 and decreases dramatically after 2008. </p>
<p><img alt="" src="assets\images\fig3.png"></p>
<h3>Annual Deaths over Time with a smoothing curve</h3>
<p>The width of rolling window is 3 years. </p>
<p><img alt="" src="assets\images\fig2.png"></p>
<h3>Malaria Incidence rate from 2000 to 2015</h3>
<p>The incidence rate all over the world decreases from 2000 to 2015, especially in east Europe and South America. The incidence rate in Africa also drops to some extent.</p>
<p><img alt="" src="assets\images\fig5.png"></p>
<p><img alt="" src="assets\images\fig6.png"></p>
<h4>Supplement: introduction of code to create interactive world map</h4>
<ul>
<li>create the color scale</li>
</ul>
<p>I choose red as the color of my graph and the higher the death rate/incidence rate is the more darker the color is.</p>
<div class="highlight"><pre><span></span><span class="err">  scl = [[0.0, &#39;#ffffff&#39;],[0.2, &#39;#ff9999&#39;],[0.4, &#39;#ff4d4d&#39;], \</span>
<span class="err">         [0.6, &#39;#ff1a1a&#39;],[0.8, &#39;#cc0000&#39;],[1.0, &#39;#4d0000&#39;]] # reds</span>
</pre></div>


<ul>
<li>create and reshape the dataset</li>
</ul>
<p>The malaria dataset has multiple countries and years and we should first split the dataset by year to create a single choropleth graph. </p>
<div class="highlight"><pre><span></span><span class="err">  for year in malaria_deaths.Year.unique():</span>
<span class="err">      malaria_deaths_year = malaria_deaths[malaria_deaths.Year==year]</span>
<span class="err">      malaria_deaths_year[&#39;text&#39;] = malaria_deaths_year[&#39;Entity&#39;]+str(malaria_deaths_year[&#39;Entity&#39;])</span>
<span class="err">      data_one_year = dict(type=&#39;choropleth&#39;,</span>
<span class="err">                          locations = malaria_deaths_year.Code,</span>
<span class="err">                          z=malaria_deaths_year[&#39;Deaths - Malaria - Sex: Both - Age: Age-standardized (Rate) (per 100,000 people)&#39;],</span>
<span class="err">                          colorscale = scl,</span>
<span class="err">                          zmin=0,</span>
<span class="err">                           zmax=200,</span>
<span class="err">                          colorbar= dict(title=&quot;Deaths per 100,000&quot;,tickvals=[0,50,100,150,200],ticktext=[&#39;0&#39;,&#39;50&#39;,&#39;100&#39;,&#39;150&#39;,&#39;200&#39;]))</span>
<span class="err">      data_slider.append(data_one_year)</span>
</pre></div>


<p><strong>Notice:</strong> you need to specify the range of color scale by zmin and zmax to avoid the overlapping of labels.</p>
<ul>
<li>create the data used for slidebar</li>
</ul>
<div class="highlight"><pre><span></span><span class="w"> </span><span class="n">steps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">[]</span><span class="w"></span>

<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">range</span><span class="p">(</span><span class="nf">len</span><span class="p">(</span><span class="n">data_slider</span><span class="p">))</span><span class="err">:</span><span class="w"></span>
<span class="w">     </span><span class="n">step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dict</span><span class="p">(</span><span class="k">method</span><span class="o">=</span><span class="s1">&#39;restyle&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">                 </span><span class="n">args</span><span class="o">=[</span><span class="n">&#39;visible&#39;, [False</span><span class="o">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nf">len</span><span class="p">(</span><span class="n">data_slider</span><span class="p">)</span><span class="err">]</span><span class="p">,</span><span class="w"></span>
<span class="w">                 </span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Year {}&#39;</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1990</span><span class="p">))</span><span class="w"></span>
<span class="w">     </span><span class="n">step</span><span class="o">[</span><span class="n">&#39;args&#39;</span><span class="o">][</span><span class="n">1</span><span class="o">][</span><span class="n">i</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">True</span><span class="w"></span>
<span class="w">     </span><span class="n">steps</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">step</span><span class="p">)</span><span class="w"></span>

<span class="w"> </span><span class="n">sliders</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="n">dict(active=0, pad={&quot;t&quot;: 1}, steps=steps)</span><span class="o">]</span><span class="w">  </span>
</pre></div>


<ul>
<li>Specify the layout and data, then call plotly.offline to dispaly the figure</li>
</ul>
<div class="highlight"><pre><span></span><span class="err"> layout = dict(sliders=sliders)</span>
<span class="err"> fig = dict(data=data_slider, layout=layout) </span>
<span class="err"> plotly.offline.iplot(fig)</span>
</pre></div>
            </section>

            <section class="post-info">
                <div class="post-share">
                    <a class="twitter" href="https://twitter.com/share?text=Informative Visualizations of Worldwide Malaria Data&amp;url=/2020/09/informative-visualizations-of-worldwide-malaria-data.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
                    </a>
                    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=/2020/09/informative-visualizations-of-worldwide-malaria-data.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <i class="ic ic-facebook"></i><span class="hidden">Facebook</span>
                    </a>
                    <a class="googleplus" href="https://plus.google.com/share?url=/2020/09/informative-visualizations-of-worldwide-malaria-data.html" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <i class="ic ic-googleplus"></i><span class="hidden">Google+</span>
                    </a>
                    <div class="clear"></div>
                </div>


                <div class="clear"></div>


                </section>


                <aside class="post-nav">
                    <div class="clear"></div>
                </aside>

            </div>
        </article>
    </main>
      <!-- TODO : Body class -->
    <div id="body-class" style="display: none;" class=""></div>

    <footer id="footer">
      <div class="inner">
        <section class="credits">


          <span class="credits-theme">Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a></span>
          <span class="credits-software">Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a></span>
        </section>
      </div>
    </footer>
  </section>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script type="text/javascript" src="/theme/js/script.js"></script>

    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-3546274-12"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-3546274-12', { 'anonymize_ip': true });
    </script>
<script type="text/javascript">
    var disqus_shortname = 'attilademo';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>